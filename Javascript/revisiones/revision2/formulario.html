<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Examen recuperación</title>
    <style>
        #errorNombre{
            color: red;
        }
        #errorCorreo{
            color: red;
        }
        #errorApellido{
            color: red;
        }
        #errorDni{
            color: red;
        }
        #errorPin{
            color: red;
        }
        #errorPin2{
            color: red;
        }

    </style>
</head>
<body>
    <label for="nombre">Nombre:</label>
    <input type="text" name="nombre" id="nombre" placeholder="Nombre"/><label id="errorNombre"></label><br><br>

    <label for="apellido">Apellido:</label>
    <input type="text" name="apellido" id="apellido"><label id="errorApellido"></label><br><br>

    <label for="correo">Correo electrónico:</label>
    <input type="text" name="correo" id="correo" placeholder="Correo"/><label id="errorCorreo"></label><br><br>

    <label for="dirección">Dirección:</label>
    <input type="text" name="dirección" id="dirección"><br><br>

    <label for="ciudad">Ciudad:</label>
    <input type="text" name="ciudad" id="ciudad"><br><br>

    <label for="dirección">Teléfono</label>
    <input type="text" name="teléfono" id="teléfono"><br><br>

    <label for="dni">DNI:</label>
    <input type="text" name="dni" id="dni"><label id="errorDni"></label><br><br>

    <label for="pin">PIN:</label>
    <input type="text" name="pin" id="pin"><label id="errorPin"></label><br><br>

    <label for="pin2">Repetir PIN:</label>
    <input type="text" name="pin2" id="pin2"><label id="errorPin2"></label><br><br>

    <button onclick="registrarse()">Registrarse</button>
    <script>

        function validacionNombre() {
            valor = document.getElementById("nombre").value;
            if( valor == null || valor.length == 0 || /^\s+$/.test(valor) ) { 
            document.getElementById("errorNombre").innerHTML = "  Este campo es obligatorio de rellenar";
            }
        }

        function validacionCorreo() {
            valor = document.getElementById("correo").value;
            if( valor == null || valor.length == 0 || /^\s+$/.test(valor) ) { 
            document.getElementById("errorCorreo").innerHTML = "  Este campo es obligatorio de rellenar";
            }
            else {
                var correoValido = /^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/;
                if ( correoValido.test(valor) ) {
                    return true;
                }
                else {
                    document.getElementById("errorCorreo").innerHTML = "El mail no es correcto";
                    return false;
                }
            }
        }

        function validacionApellido() {
            valor = document.getElementById("apellido").value;
            if( valor == null || valor.length == 0 || /^\s+$/.test(valor) ) { 
            document.getElementById("errorApellido").innerHTML = "  Este campo es obligatorio de rellenar";
            }
        }

        function validacionDni(dni) {
            var numero
            var letr
            var letra
            var expresion_regular_dni
            
            expresion_regular_dni = /^\d{8}[a-zA-Z]$/;
            
            if(expresion_regular_dni.test (dni) == true){
                numero = dni.substr(0,dni.length-1);
                letr = dni.substr(dni.length-1,1);
                numero = numero % 23;
                letra='TRWAGMYFPDXBNJZSQVHLCKET';
                letra=letra.substring(numero,numero+1);
                if (letra!=letr.toUpperCase()) {
                document.getElementById("errorDni").innerHTML = "Dni erroneo, la letra del NIF no se corresponde";
                }
            }
            else {
                document.getElementById("errorDni").innerHTML = "Dni erroneo, formato no válido";
            }
        }

        function validacionPin() {
            valor = document.getElementById("pin").value;
            if( valor == null || valor.length == 0 || /^\s+$/.test(valor) ) { 
                document.getElementById("errorPin").innerHTML = "Este campo es obligatorio de rellenar";
            }
            else if (!isNaN(valor)) {
                document.getElementById("errorPin".innerHTML) = "El Pin debe de ser numérico";
            }
        }

        function validacionPin2() {
            pin1 = document.getElementById("pin").value;
            pin2 = document.getElementById("pin2").value;
            if( valor == null || valor.length == 0 || /^\s+$/.test(valor) ) { 
                document.getElementById("errorPin2").innerHTML = "Este campo es obligatorio de rellenar";
            }
            else if (pin1 != pin2) {
                document.getElementById("errorPin2").innerHTML = "Los pins no coinciden";
            }
        }
        function registrarse() {
            
            validacionNombre();
            validacionCorreo();
            validacionApellido();
            validacionDni();
            validacionPin();
            validacionPin2();
            
                var nombre = document.getElementById("nombre").value; //Creo la variable nombre
                nombre = nombre.substr(0,3);
                correo = correo2.substr(0,3); //Obtengo las 3 primeras cifras de ambos
                usuario = nombre+correo2; //Doy el valor al usuario 
                alert ('Su usuario es: ' + usuario + 'y su contraseña ' + contraseña);
            
        }

    </script>
</body>
</html>